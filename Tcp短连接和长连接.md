## Tcp链接
当网络通信采用TCP协议时，在真正的读写操作之前，server与client之间必须建立一个链接，读写操作完成之后，不再需要这个链接时，它们可以释放这个链接，连接的建立需要三次握手，而释放需要四次握手，所以每个链接的建立都是需要资源消耗和时间消耗的。
## TCP短连接
模拟一下短连接的情况，client向server发起连接请求，server接到请求，然后双方建立连接。client向server发送消息，server回应client，然后依次读写就完成了，这时候双方任何一个都可以发起close操作，不过一般都是client先发起close操作，因为一般server不会回复完就立即关闭连接的，当然不排除有特殊的情况。所以，短连接一般只会在client/server间传递依次读写操作。
短连接的优点是：管理起来比较简单，存在的连接都是有用的连接，不需要额外的控制手段。
## TCP长连接
长连接的情况，client向server发起连接，server接受client连接，双方建立连接。Client与server完成依次读写之后，它们之间的连接并不会主动关闭，后续的读写操作会继续使用这个连接。
TCP/IP上讲到TCP保活功能，保活功能主要为服务器应用提供，服务器应用希望知道客户主机是否崩溃，从而可以代表客户使用资源，如果客户已经消失，使得服务器上保留一个半开放的连接，而服务器又在等待来自客户端的数据，则服务器将则服务器将一直等待哭护短的数据，保活功能就是试图在服务器检测到这种半开放的连接。
如果一个给定的连接在两小时内没有任何的动作，则服务器就向客户发一个探测报文段，客户主机必须处于以下4中状态之一：
1. 客户主机依然正常运行，并从服务器可达。客户的TCP响应正常，而服务器也知道对方是正常的，服务器在两小时后将保活定时器复位。
2. 客户主机已经崩溃，并且关闭或者正在重新启动。在任何一种情况下，客户的TCP都没有响应。服务端将不能收到对探测的响应，并在75秒后超时。服务器总共发送10个这样的探测，每个间隔75秒。如果服务器没有收到一个响应，他就认为苦主机已经关闭并终止连接。
3. 客户主机崩溃并已经重新启动。服务器将收到一个对其保活探测的响应，这个响应是一个复位，使得服务器终止这个连接。
4. 客户机正常运行，但是服务器不可达，这种情况与2类似，TCP能发现的就是没有收到探查的响应。

二者的产生在于client和server采取的关闭策略。