# GC是如何工作的 #
1. 标记：找出所有引用部位0（Live）的实例，找到所有GC的根节点（gc root），将他们放到队列里，然后依次地柜地遍历所有的根节点以及引用的所有子节点和子子节点，将所有被遍历到的节点标记为live，弱引用不会被遍历
2. 计划和清理
  - 计划：判断是否需要压缩，方法：遍历当前所有的generation上所有的标记（Live），依据特定算法做出决策
  - 清理：回收所有的free空间，遍历当前generation上所有的标记（Live or Dead），把所有处在Live实例中间的内存块加入到可用内存链表中去
3. 引用更新和压缩
  - 引用更新：将所有引用的地址进行更新。方法：计算出压缩后每个实例对应的新地址，找到所有的GC的根节点，放入队列，递归遍历所有的根节点和所有的子节点和子子节点，将所有被遍历的节点中引用的地址进行更新，包括弱引用。
  - 压缩：根据计算出来的新地址，把实例移动到相应的位置